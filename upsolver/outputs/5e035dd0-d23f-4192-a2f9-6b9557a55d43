{
  "clazz" : "OutputTemplate",
  "useNewEscaping" : false,
  "supportMapSameKeyMultipleTimes" : false,
  "id" : "5e035dd0-d23f-4192-a2f9-6b9557a55d43",
  "displayData" : {
    "name" : "mq_user_device_kochava_lookup",
    "description" : "",
    "creationTime" : "2021-03-27T06:37:17.326809Z",
    "createdBy" : "Roby Jacob (roby.jacob@hashcube.com)",
    "modifiedTime" : "2021-04-13T10:26:55.858665Z",
    "modifiedBy" : {
      "value" : "Roby Jacob (roby.jacob@hashcube.com)"
    },
    "versionId" : "9b5f8366-49cd-4298-863f-82d1667da2a6"
  },
  "inputs" : [ "2b0f63d4-7c6c-4412-8ad5-2b3729612232", "71119967-9da7-4d09-bca9-6ac7032117b8" ],
  "organizationId" : "33b7cf17-9f45-4e72-824d-10bd03e88dde",
  "groupBy" : true,
  "outputParameters" : {
    "clazz" : "IndexOutputParameters",
    "outputFields" : [ {
      "clazz" : "RawCalculatedFieldOutput",
      "outputs" : [ ],
      "featureDefinition" : {
        "clazz" : "FeatureDefinition",
        "dsl" : null,
        "field" : {
          "name" : "kl1",
          "nativeType" : {
            "name" : "lookup",
            "isArray" : false,
            "subFields" : [ {
              "name" : "network_name",
              "nativeType" : {
                "name" : "string",
                "isArray" : false,
                "subFields" : [ ]
              }
            }, {
              "name" : "site_id",
              "nativeType" : {
                "name" : "string",
                "isArray" : false,
                "subFields" : [ ]
              }
            } ]
          }
        },
        "featureInputs" : [ {
          "clazz" : "FieldFeatureInput",
          "nativeType" : {
            "name" : "string",
            "isArray" : false,
            "subFields" : [ ]
          },
          "field" : {
            "name" : "data.uid",
            "nativeType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          },
          "isAggregationField" : false,
          "isFromInline" : false
        } ],
        "feature" : {
          "clazz" : "ImplicitLookup",
          "inputs" : [ "71119967-9da7-4d09-bca9-6ac7032117b8" ],
          "joinFields" : [ {
            "name" : "data.uid",
            "nativeType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          } ],
          "aggregations" : [ {
            "clazz" : "NewIndexAggregation",
            "name" : "network_name",
            "operation" : {
              "clazz" : "AggregationType$Last"
            },
            "inputFields" : [ {
              "clazz" : "FieldFeatureInput",
              "nativeType" : {
                "name" : "string",
                "isArray" : false,
                "subFields" : [ ]
              },
              "field" : {
                "name" : "data.network_name",
                "nativeType" : {
                  "name" : "string",
                  "isArray" : false,
                  "subFields" : [ ]
                }
              },
              "isAggregationField" : false,
              "isFromInline" : false
            } ],
            "isKeyColumn" : false,
            "withBitmaps" : false,
            "returnType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          }, {
            "clazz" : "NewIndexAggregation",
            "name" : "site_id",
            "operation" : {
              "clazz" : "AggregationType$Last"
            },
            "inputFields" : [ {
              "clazz" : "FieldFeatureInput",
              "nativeType" : {
                "name" : "string",
                "isArray" : false,
                "subFields" : [ ]
              },
              "field" : {
                "name" : "data.site_id",
                "nativeType" : {
                  "name" : "string",
                  "isArray" : false,
                  "subFields" : [ ]
                }
              },
              "isAggregationField" : false,
              "isFromInline" : false
            } ],
            "isKeyColumn" : false,
            "withBitmaps" : false,
            "returnType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          } ],
          "timeFrame" : {
            "from" : -14400000,
            "to" : 0
          },
          "timeField" : {
            "clazz" : "FieldFeatureInput",
            "nativeType" : {
              "name" : "number",
              "isArray" : false,
              "subFields" : [ ]
            },
            "field" : {
              "name" : "time",
              "nativeType" : {
                "name" : "number",
                "isArray" : false,
                "subFields" : [ ]
              }
            },
            "isAggregationField" : false,
            "isFromInline" : false
          },
          "useLatestSnapshot" : false,
          "copiedFeatures" : [ ],
          "innerJoin" : false
        },
        "inline" : true,
        "id" : "9f0dd34b-7672-4038-abcb-74e4b44ce970",
        "infix" : false,
        "pathForRead" : { }
      }
    }, {
      "clazz" : "RawCalculatedFieldOutput",
      "outputs" : [ ],
      "featureDefinition" : {
        "clazz" : "FeatureDefinition",
        "dsl" : null,
        "field" : {
          "name" : "kl2",
          "nativeType" : {
            "name" : "lookup",
            "isArray" : false,
            "subFields" : [ {
              "name" : "network_name",
              "nativeType" : {
                "name" : "string",
                "isArray" : false,
                "subFields" : [ ]
              }
            }, {
              "name" : "site_id",
              "nativeType" : {
                "name" : "string",
                "isArray" : false,
                "subFields" : [ ]
              }
            } ]
          }
        },
        "featureInputs" : [ {
          "clazz" : "FieldFeatureInput",
          "nativeType" : {
            "name" : "string",
            "isArray" : false,
            "subFields" : [ ]
          },
          "field" : {
            "name" : "data.kochava_id",
            "nativeType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          },
          "isAggregationField" : false,
          "isFromInline" : false
        } ],
        "feature" : {
          "clazz" : "ImplicitLookup",
          "inputs" : [ "71119967-9da7-4d09-bca9-6ac7032117b8" ],
          "joinFields" : [ {
            "name" : "data.kochava_id",
            "nativeType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          } ],
          "aggregations" : [ {
            "clazz" : "NewIndexAggregation",
            "name" : "network_name",
            "operation" : {
              "clazz" : "AggregationType$Last"
            },
            "inputFields" : [ {
              "clazz" : "FieldFeatureInput",
              "nativeType" : {
                "name" : "string",
                "isArray" : false,
                "subFields" : [ ]
              },
              "field" : {
                "name" : "data.network_name",
                "nativeType" : {
                  "name" : "string",
                  "isArray" : false,
                  "subFields" : [ ]
                }
              },
              "isAggregationField" : false,
              "isFromInline" : false
            } ],
            "isKeyColumn" : false,
            "withBitmaps" : false,
            "returnType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          }, {
            "clazz" : "NewIndexAggregation",
            "name" : "site_id",
            "operation" : {
              "clazz" : "AggregationType$Last"
            },
            "inputFields" : [ {
              "clazz" : "FieldFeatureInput",
              "nativeType" : {
                "name" : "string",
                "isArray" : false,
                "subFields" : [ ]
              },
              "field" : {
                "name" : "data.site_id",
                "nativeType" : {
                  "name" : "string",
                  "isArray" : false,
                  "subFields" : [ ]
                }
              },
              "isAggregationField" : false,
              "isFromInline" : false
            } ],
            "isKeyColumn" : false,
            "withBitmaps" : false,
            "returnType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          } ],
          "timeFrame" : {
            "from" : -14400000,
            "to" : 0
          },
          "timeField" : {
            "clazz" : "FieldFeatureInput",
            "nativeType" : {
              "name" : "number",
              "isArray" : false,
              "subFields" : [ ]
            },
            "field" : {
              "name" : "time",
              "nativeType" : {
                "name" : "number",
                "isArray" : false,
                "subFields" : [ ]
              }
            },
            "isAggregationField" : false,
            "isFromInline" : false
          },
          "useLatestSnapshot" : false,
          "copiedFeatures" : [ ],
          "innerJoin" : false
        },
        "inline" : true,
        "id" : "8b0b3ba6-c70d-4196-a485-727413111c81",
        "infix" : false,
        "pathForRead" : { }
      }
    }, {
      "clazz" : "RawCalculatedFieldOutput",
      "outputs" : [ ],
      "featureDefinition" : {
        "clazz" : "FeatureDefinition",
        "dsl" : null,
        "field" : {
          "name" : "kl3",
          "nativeType" : {
            "name" : "lookup",
            "isArray" : false,
            "subFields" : [ {
              "name" : "network_name",
              "nativeType" : {
                "name" : "string",
                "isArray" : false,
                "subFields" : [ ]
              }
            }, {
              "name" : "site_id",
              "nativeType" : {
                "name" : "string",
                "isArray" : false,
                "subFields" : [ ]
              }
            } ]
          }
        },
        "featureInputs" : [ {
          "clazz" : "FieldFeatureInput",
          "nativeType" : {
            "name" : "string",
            "isArray" : false,
            "subFields" : [ ]
          },
          "field" : {
            "name" : "data.device_id",
            "nativeType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          },
          "isAggregationField" : false,
          "isFromInline" : false
        } ],
        "feature" : {
          "clazz" : "ImplicitLookup",
          "inputs" : [ "71119967-9da7-4d09-bca9-6ac7032117b8" ],
          "joinFields" : [ {
            "name" : "data.idfa",
            "nativeType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          } ],
          "aggregations" : [ {
            "clazz" : "NewIndexAggregation",
            "name" : "network_name",
            "operation" : {
              "clazz" : "AggregationType$Last"
            },
            "inputFields" : [ {
              "clazz" : "FieldFeatureInput",
              "nativeType" : {
                "name" : "string",
                "isArray" : false,
                "subFields" : [ ]
              },
              "field" : {
                "name" : "data.network_name",
                "nativeType" : {
                  "name" : "string",
                  "isArray" : false,
                  "subFields" : [ ]
                }
              },
              "isAggregationField" : false,
              "isFromInline" : false
            } ],
            "isKeyColumn" : false,
            "withBitmaps" : false,
            "returnType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          }, {
            "clazz" : "NewIndexAggregation",
            "name" : "site_id",
            "operation" : {
              "clazz" : "AggregationType$Last"
            },
            "inputFields" : [ {
              "clazz" : "FieldFeatureInput",
              "nativeType" : {
                "name" : "string",
                "isArray" : false,
                "subFields" : [ ]
              },
              "field" : {
                "name" : "data.site_id",
                "nativeType" : {
                  "name" : "string",
                  "isArray" : false,
                  "subFields" : [ ]
                }
              },
              "isAggregationField" : false,
              "isFromInline" : false
            } ],
            "isKeyColumn" : false,
            "withBitmaps" : false,
            "returnType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          } ],
          "timeFrame" : {
            "from" : -14400000,
            "to" : 0
          },
          "timeField" : {
            "clazz" : "FieldFeatureInput",
            "nativeType" : {
              "name" : "number",
              "isArray" : false,
              "subFields" : [ ]
            },
            "field" : {
              "name" : "time",
              "nativeType" : {
                "name" : "number",
                "isArray" : false,
                "subFields" : [ ]
              }
            },
            "isAggregationField" : false,
            "isFromInline" : false
          },
          "useLatestSnapshot" : false,
          "copiedFeatures" : [ ],
          "innerJoin" : false
        },
        "inline" : true,
        "id" : "d5eedb40-a673-4081-b31e-b11177d663dd",
        "infix" : false,
        "pathForRead" : { }
      }
    }, {
      "clazz" : "KeyColumnOutput",
      "outputs" : [ {
        "name" : "kochava_id",
        "index" : 9,
        "warnings" : [ ]
      } ],
      "field" : {
        "clazz" : "FieldFeatureInput",
        "nativeType" : {
          "name" : "string",
          "isArray" : false,
          "subFields" : [ ]
        },
        "field" : {
          "name" : "data.kochava_id",
          "nativeType" : {
            "name" : "string",
            "isArray" : false,
            "subFields" : [ ]
          }
        },
        "isAggregationField" : false,
        "isFromInline" : false
      }
    }, {
      "clazz" : "KeyColumnOutput",
      "outputs" : [ {
        "name" : "uid",
        "index" : 10,
        "warnings" : [ ]
      } ],
      "field" : {
        "clazz" : "FieldFeatureInput",
        "nativeType" : {
          "name" : "string",
          "isArray" : false,
          "subFields" : [ ]
        },
        "field" : {
          "name" : "data.uid",
          "nativeType" : {
            "name" : "string",
            "isArray" : false,
            "subFields" : [ ]
          }
        },
        "isAggregationField" : false,
        "isFromInline" : false
      }
    }, {
      "clazz" : "KeyColumnOutput",
      "outputs" : [ {
        "name" : "device_id",
        "index" : 11,
        "warnings" : [ ]
      } ],
      "field" : {
        "clazz" : "FieldFeatureInput",
        "nativeType" : {
          "name" : "string",
          "isArray" : false,
          "subFields" : [ ]
        },
        "field" : {
          "name" : "data.device_id",
          "nativeType" : {
            "name" : "string",
            "isArray" : false,
            "subFields" : [ ]
          }
        },
        "isAggregationField" : false,
        "isFromInline" : false
      }
    }, {
      "clazz" : "AggregationOutput",
      "outputs" : [ {
        "name" : "site_id",
        "index" : 12,
        "warnings" : [ ]
      } ],
      "aggregation" : {
        "clazz" : "NewIndexAggregation",
        "name" : "site_id",
        "operation" : {
          "clazz" : "AggregationType$Last"
        },
        "inputFields" : [ {
          "clazz" : "PointerFeatureInput",
          "featureId" : "9f0dd34b-7672-4038-abcb-74e4b44ce970",
          "subField" : "site_id",
          "nativeType" : {
            "name" : "string",
            "isArray" : false,
            "subFields" : [ ]
          },
          "field" : {
            "name" : "kl1.site_id",
            "nativeType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          },
          "isAggregationField" : false
        } ],
        "isKeyColumn" : false,
        "withBitmaps" : false,
        "returnType" : {
          "name" : "string",
          "isArray" : false,
          "subFields" : [ ]
        }
      }
    }, {
      "clazz" : "AggregationOutput",
      "outputs" : [ {
        "name" : "network_name",
        "index" : 13,
        "warnings" : [ ]
      } ],
      "aggregation" : {
        "clazz" : "NewIndexAggregation",
        "name" : "network_name",
        "operation" : {
          "clazz" : "AggregationType$Last"
        },
        "inputFields" : [ {
          "clazz" : "PointerFeatureInput",
          "featureId" : "9f0dd34b-7672-4038-abcb-74e4b44ce970",
          "subField" : "network_name",
          "nativeType" : {
            "name" : "string",
            "isArray" : false,
            "subFields" : [ ]
          },
          "field" : {
            "name" : "kl1.network_name",
            "nativeType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          },
          "isAggregationField" : false
        } ],
        "isKeyColumn" : false,
        "withBitmaps" : false,
        "returnType" : {
          "name" : "string",
          "isArray" : false,
          "subFields" : [ ]
        }
      }
    }, {
      "clazz" : "AggregationOutput",
      "outputs" : [ {
        "name" : "site_id_2",
        "index" : 14,
        "warnings" : [ ]
      } ],
      "aggregation" : {
        "clazz" : "NewIndexAggregation",
        "name" : "site_id_2",
        "operation" : {
          "clazz" : "AggregationType$Last"
        },
        "inputFields" : [ {
          "clazz" : "PointerFeatureInput",
          "featureId" : "8b0b3ba6-c70d-4196-a485-727413111c81",
          "subField" : "site_id",
          "nativeType" : {
            "name" : "string",
            "isArray" : false,
            "subFields" : [ ]
          },
          "field" : {
            "name" : "kl2.site_id",
            "nativeType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          },
          "isAggregationField" : false
        } ],
        "isKeyColumn" : false,
        "withBitmaps" : false,
        "returnType" : {
          "name" : "string",
          "isArray" : false,
          "subFields" : [ ]
        }
      }
    }, {
      "clazz" : "AggregationOutput",
      "outputs" : [ {
        "name" : "network_name_2",
        "index" : 15,
        "warnings" : [ ]
      } ],
      "aggregation" : {
        "clazz" : "NewIndexAggregation",
        "name" : "network_name_2",
        "operation" : {
          "clazz" : "AggregationType$Last"
        },
        "inputFields" : [ {
          "clazz" : "PointerFeatureInput",
          "featureId" : "8b0b3ba6-c70d-4196-a485-727413111c81",
          "subField" : "network_name",
          "nativeType" : {
            "name" : "string",
            "isArray" : false,
            "subFields" : [ ]
          },
          "field" : {
            "name" : "kl2.network_name",
            "nativeType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          },
          "isAggregationField" : false
        } ],
        "isKeyColumn" : false,
        "withBitmaps" : false,
        "returnType" : {
          "name" : "string",
          "isArray" : false,
          "subFields" : [ ]
        }
      }
    }, {
      "clazz" : "AggregationOutput",
      "outputs" : [ {
        "name" : "site_id_3",
        "index" : 16,
        "warnings" : [ ]
      } ],
      "aggregation" : {
        "clazz" : "NewIndexAggregation",
        "name" : "site_id_3",
        "operation" : {
          "clazz" : "AggregationType$Last"
        },
        "inputFields" : [ {
          "clazz" : "PointerFeatureInput",
          "featureId" : "d5eedb40-a673-4081-b31e-b11177d663dd",
          "subField" : "site_id",
          "nativeType" : {
            "name" : "string",
            "isArray" : false,
            "subFields" : [ ]
          },
          "field" : {
            "name" : "kl3.site_id",
            "nativeType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          },
          "isAggregationField" : false
        } ],
        "isKeyColumn" : false,
        "withBitmaps" : false,
        "returnType" : {
          "name" : "string",
          "isArray" : false,
          "subFields" : [ ]
        }
      }
    }, {
      "clazz" : "AggregationOutput",
      "outputs" : [ {
        "name" : "network_name_3",
        "index" : 17,
        "warnings" : [ ]
      } ],
      "aggregation" : {
        "clazz" : "NewIndexAggregation",
        "name" : "network_name_3",
        "operation" : {
          "clazz" : "AggregationType$Last"
        },
        "inputFields" : [ {
          "clazz" : "PointerFeatureInput",
          "featureId" : "d5eedb40-a673-4081-b31e-b11177d663dd",
          "subField" : "network_name",
          "nativeType" : {
            "name" : "string",
            "isArray" : false,
            "subFields" : [ ]
          },
          "field" : {
            "name" : "kl3.network_name",
            "nativeType" : {
              "name" : "string",
              "isArray" : false,
              "subFields" : [ ]
            }
          },
          "isAggregationField" : false
        } ],
        "isKeyColumn" : false,
        "withBitmaps" : false,
        "returnType" : {
          "name" : "string",
          "isArray" : false,
          "subFields" : [ ]
        }
      }
    } ],
    "window" : 14400000,
    "softRetention" : false,
    "allowPartialKeyQueries" : false,
    "omitKeyColumns" : false,
    "isLazyLoad" : false,
    "isRealTime" : false,
    "previousVersions" : [ ]
  },
  "outputInterval" : 1,
  "startExecutionFrom" : "2021-03-22T19:21:04.914570Z",
  "allowCartesianProducts" : false,
  "isDeleted" : true,
  "isRunning" : false,
  "deployedEver" : false,
  "physicalDelete" : {
    "initiated" : false,
    "shouldRun" : false
  },
  "version" : 58,
  "allowRenaming" : true,
  "operationParallelism" : {
    "clazz" : "NoOperationParallelism"
  },
  "outputSharding" : {
    "clazz" : "NoOperationParallelism"
  },
  "workspaces" : [ ],
  "reportingTags" : "",
  "blocks" : [ {
    "id" : "1b660645-9a5e-4aa6-94c1-0b8882a7d756",
    "title" : "Select Block",
    "expression" : "// GENERATED @ 2021-03-27T06:37:18.131006Z\nSELECT data.kochava_id AS kochava_id,\n    data.uid AS uid,\n    data.device_id AS device_id,\n    LAST(kl1.site_id) AS site_id,\n    LAST(kl1.network_name) AS network_name,\n    LAST(kl2.site_id) AS site_id_2,\n    LAST(kl2.network_name) AS network_name_2,\n    LAST(kl3.site_id) AS site_id_3,\n    LAST(kl3.network_name) AS network_name_3\n  FROM \"mq_user_device_source\"\n      LEFT JOIN (SELECT data.uid AS uid, LAST(data.network_name) AS network_name, LAST(data.site_id) AS site_id FROM mq_kochava_events_source GROUP BY data.uid) kl1 ON kl1.uid = data.uid\n      LEFT JOIN (SELECT data.kochava_id AS kochava_id, LAST(data.network_name) AS network_name, LAST(data.site_id) AS site_id FROM mq_kochava_events_source GROUP BY data.kochava_id) kl2 ON kl2.kochava_id = data.kochava_id\n      LEFT JOIN (SELECT data.idfa AS idfa, LAST(data.network_name) AS network_name, LAST(data.site_id) AS site_id FROM (SELECT * FROM \"mq_user_device_source\" UNION ALL\n        SELECT * FROM \"mq_kochava_events_source\") GROUP BY data.idfa) kl3 ON kl3.idfa = data.device_id\n      GROUP BY data.kochava_id, data.uid, data.device_id\n",
    "dslWarnings" : [ ],
    "isSelectBlock" : true
  } ],
  "groupByDeletion" : true,
  "eventTypes" : [ ],
  "restrictions" : [ ],
  "status" : {
    "clazz" : "Archived"
  },
  "shards" : 1,
  "outputShards" : 1,
  "hasAggregations" : true,
  "allReferences" : [ "2b0f63d4-7c6c-4412-8ad5-2b3729612232", "71119967-9da7-4d09-bca9-6ac7032117b8", "71119967-9da7-4d09-bca9-6ac7032117b8", "71119967-9da7-4d09-bca9-6ac7032117b8", "71119967-9da7-4d09-bca9-6ac7032117b8" ],
  "versionNumber" : 1
}